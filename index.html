<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineTech Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
</head>
<body>
    <!-- ========== TOP NAVBAR ========== -->
    <nav class="navbar">
        <div class="logo">
            <h2><i class="fas fa-film"></i> CineTech</h2>
        </div>
        <ul class="menu">
            <li data-section="dashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</li>
            <li data-section="movies"><i class="fas fa-film"></i> Films</li>
            <li data-section="directors"><i class="fas fa-user"></i> Réalisateurs</li>
            <li data-section="api"><i class="fas fa-cloud-download-alt"></i> API OMDB</li>
        </ul>
    </nav>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="main-content">
        <!-- ===== DASHBOARD ===== -->
        <section id="dashboard" class="section active">
            <h1>Tableau de Bord</h1>
            <div class="kpi-container">
                <div class="kpi">
                    <h3 id="kpi-total-movies">0</h3>
                    <p>Total Films</p>
                </div>
                <div class="kpi">
                    <h3 id="kpi-avg-rating">0</h3>
                    <p>Note Moyenne</p>
                </div>
                <div class="kpi">
                    <h3 id="kpi-directors">0</h3>
                    <p>Réalisateurs</p>
                </div>
                <div class="kpi">
                    <h3 id="kpi-recent-movies">0</h3>
                    <p>Films récents</p>
                </div>
            </div>
            <div class="charts-container">
                <div class="chart-card">
                    <h4>Films par Genre</h4>
                    <canvas id="genreChart"></canvas>
                </div>
                <div class="chart-card">
                    <h4>Top Films par Note</h4>
                    <canvas id="ratingChart"></canvas>
                </div>
            </div>
        </section>

        <!-- ===== MOVIES ===== -->
        <section id="movies" class="section">
            <div class="section-header">
                <h1>Gestion des Films</h1>
                <button class="btn btn-primary" onclick="openMovieModal()"><i class="fas fa-plus"></i> Ajouter un Film</button>
            </div>
            <div class="filters">
                <input type="text" id="searchMovie" placeholder="Rechercher un film...">
                <select id="sortMovie">
                    <option value="title-asc">Titre (A-Z)</option>
                    <option value="title-desc">Titre (Z-A)</option>
                    <option value="year-asc">Année (asc)</option>
                    <option value="year-desc">Année (desc)</option>
                    <option value="rating-asc">Note (asc)</option>
                    <option value="rating-desc">Note (desc)</option>
                </select>
                <select id="filterGenre">
                    <option value="">Tous les genres</option>
                    <option value="Action">Action</option>
                    <option value="Comédie">Comédie</option>
                    <option value="Drame">Drame</option>
                    <option value="Science-Fiction">Science-Fiction</option>
                    <option value="Horreur">Horreur</option>
                    <option value="Thriller">Thriller</option>
                    <option value="Animation">Animation</option>
                </select>
            </div>
            <div id="moviesList" class="movies-grid">
                <!-- Les films seront affichés ici via JS -->
            </div>
        </section>

        <!-- ===== DIRECTORS ===== -->
        <section id="directors" class="section">
            <div class="section-header">
                <h1>Gestion des Réalisateurs</h1>
                <button class="btn btn-primary" onclick="openDirectorModal()"><i class="fas fa-plus"></i> Ajouter un Réalisateur</button>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Nationalité</th>
                        <th>Films</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="directorsList">
                    <!-- Les réalisateurs seront affichés ici via JS -->
                </tbody>
            </table>
        </section>

        <!-- ===== API OMDB ===== -->
        <section id="api" class="section">
            <h1>Importer depuis OMDB</h1>
            <div class="api-search">
                <input type="text" id="apiSearchInput" placeholder="Rechercher un film sur OMDB...">
                <button class="btn btn-primary" id="apiSearchBtn"><i class="fas fa-search"></i> Rechercher</button>
            </div>
            <div id="apiMoviesList" class="movies-grid">
                <!-- Résultats API OMDB -->
            </div>
        </section>
    </main>

    <!-- ========== MODALS ========== -->
    <!-- Movie Modal -->
    <div class="modal" id="movieModal">
        <div class="modal-content">
            <h2 id="movieModalTitle">Ajouter un Film</h2>
            <form id="movieForm" onsubmit="event.preventDefault(); saveMovie();">
                <input type="hidden" id="movieId">
                <label>Titre <span class="required">*</span></label>
                <input type="text" id="movieTitle" class="form-control">
                <div id="movieTitleError" class="error-message"></div>

                <label>Année <span class="required">*</span></label>
                <input type="number" id="movieYear" class="form-control">
                <div id="movieYearError" class="error-message"></div>

                <label>Durée (min) <span class="required">*</span></label>
                <input type="number" id="movieDuration" class="form-control">
                <div id="movieDurationError" class="error-message"></div>

                <label>Genre <span class="required">*</span></label>
                <select id="movieGenre" class="form-control">
                    <option value="">Sélectionner un genre</option>
                    <option value="Action">Action</option>
                    <option value="Comédie">Comédie</option>
                    <option value="Drame">Drame</option>
                    <option value="Science-Fiction">Science-Fiction</option>
                    <option value="Horreur">Horreur</option>
                    <option value="Thriller">Thriller</option>
                    <option value="Animation">Animation</option>
                </select>
                <div id="movieGenreError" class="error-message"></div>

                <label>Note (0-10) <span class="required">*</span></label>
                <input type="number" step="0.1" id="movieRating" class="form-control">
                <div id="movieRatingError" class="error-message"></div>

                <label>Réalisateur <span class="required">*</span></label>
                <select id="movieDirector" class="form-control"></select>
                <div id="movieDirectorError" class="error-message"></div>

                <label>Synopsis</label>
                <textarea id="movieSynopsis" class="form-control"></textarea>

                <label>Poster (URL) - e.g. https://via.placeholder.com/300x450?text=Film</label>
                <input type="text" id="moviePoster" class="form-control" placeholder="https://via.placeholder.com/300x450?text=Film">

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeMovieModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Director Modal -->
    <div class="modal" id="directorModal">
        <div class="modal-content">
            <h2 id="directorModalTitle">Ajouter un Réalisateur</h2>
            <form id="directorForm" onsubmit="event.preventDefault(); saveDirector();">
                <input type="hidden" id="directorId">
                <label>Nom <span class="required">*</span></label>
                <input type="text" id="directorName" class="form-control">

                <label>Nationalité <span class="required">*</span></label>
                <input type="text" id="directorNationality" class="form-control">

                <label>Bio</label>
                <textarea id="directorBio" class="form-control"></textarea>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeDirectorModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Movie Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div id="detailModalBody">
                <!-- Contenu dynamique -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeDetailModal()">Fermer</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>